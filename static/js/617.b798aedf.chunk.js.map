{"version":3,"file":"static/js/617.b798aedf.chunk.js","mappings":"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","sources":["services/aiService.js","components/DesignEditor.jsx"],"sourcesContent":["import { HfInference } from \"@huggingface/inference\";\r\n\r\nconst HF_TOKEN = process.env.REACT_APP_HF_TOKEN; // Ensure this is set in your .env file\r\n\r\n// Initialize client\r\n// Note: In a production app, API calls should ideally go through a backend to hide the API key.\r\nconst client = new HfInference(HF_TOKEN);\r\n\r\n/**\r\n * Generates an image based on a text prompt using Hugging Face Inference API.\r\n * Uses the 'Tongyi-MAI/Z-Image-Turbo' model via 'fal-ai' provider if configured, \r\n * or falls back to standard inference.\r\n * \r\n * @param {string} prompt - The text description for the image.\r\n * @returns {Promise<string>} - A promise that resolves to the image URL (data URL).\r\n */\r\nexport const generateAIImage = async (prompt) => {\r\n    if (!HF_TOKEN) {\r\n        throw new Error(\"Missing Hugging Face API Token. Please set REACT_APP_HF_TOKEN in your .env file.\");\r\n    }\r\n\r\n    try {\r\n        const response = await client.textToImage({\r\n            model: \"stabilityai/stable-diffusion-xl-base-1.0\",\r\n            inputs: prompt,\r\n            parameters: {\r\n                width: 1024,\r\n                height: 1024,\r\n            },\r\n        });\r\n\r\n        // Convert Blob to Data URL\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => resolve(reader.result);\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(response);\r\n        });\r\n    } catch (error) {\r\n        console.error(\"AI Image Generation Error:\", error);\r\n        throw error;\r\n    }\r\n};\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { ArrowLeft, Type, Image as ImageIcon, Download, Save, Trash2, Move, Undo, Redo, Palette, Plus, Grid, ZoomIn, ZoomOut, Layers, AlertCircle, Sparkles, Copy, LayoutTemplate, Wand2 } from 'lucide-react';\r\nimport { generateAIImage } from '../services/aiService';\r\n\r\n// Design Presets Configuration\r\nconst PRODUCT_PRESETS = {\r\n    'visiting-card': { name: 'Visiting Card', width: 350, height: 200, bleed: 10, safe: 20 },\r\n    'flyer-a5': { name: 'Flyer (A5)', width: 420, height: 595, bleed: 15, safe: 30 },\r\n    'instagram-post': { name: 'Instagram Post', width: 500, height: 500, bleed: 0, safe: 0 },\r\n    'banner-landscape': { name: 'Banner', width: 800, height: 300, bleed: 20, safe: 40 },\r\n    't-shirt': { name: 'T-Shirt Print', width: 400, height: 500, bleed: 0, safe: 0 },\r\n};\r\n\r\nconst CARD_SHAPES = {\r\n    'rectangle': { label: 'Rectangle', class: 'rounded-none', square: false },\r\n    'rounded': { label: 'Rounded', class: 'rounded-2xl', square: false },\r\n    'leaf': { label: 'Leaf', class: 'rounded-tl-3xl rounded-br-3xl', square: false },\r\n    'oval': { label: 'Oval', class: 'rounded-[100px]', square: false }, // elliptical\r\n    'circle': { label: 'Circle', class: 'rounded-full', square: true },\r\n    'square': { label: 'Square', class: 'rounded-none', square: true },\r\n};\r\n\r\nconst FONT_FAMILIES = [\r\n    { name: 'Arial', value: 'Arial, sans-serif', type: 'System' },\r\n    { name: 'Times New Roman', value: '\"Times New Roman\", serif', type: 'System' },\r\n    { name: 'Courier New', value: '\"Courier New\", monospace', type: 'System' },\r\n    { name: 'Inter', value: 'Inter, sans-serif', type: 'Google' },\r\n    { name: 'Roboto', value: 'Roboto, sans-serif', type: 'Google' },\r\n    { name: 'Playfair Display', value: '\"Playfair Display\", serif', type: 'Google' },\r\n    { name: 'Montserrat', value: 'Montserrat, sans-serif', type: 'Google' },\r\n    { name: 'Oswald', value: 'Oswald, sans-serif', type: 'Google' },\r\n    { name: 'Dancing Script', value: '\"Dancing Script\", cursive', type: 'Google' },\r\n    { name: 'Lato', value: 'Lato, sans-serif', type: 'Google' },\r\n];\r\n\r\nconst DesignEditor = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const initialServiceName = location.state?.serviceName || 'Custom Print';\r\n    const canvasRef = useRef(null);\r\n\r\n    // Load Google Fonts\r\n    useEffect(() => {\r\n        const linkId = 'google-fonts-link';\r\n        if (!document.getElementById(linkId)) {\r\n            const link = document.createElement('link');\r\n            link.id = linkId;\r\n            link.href = 'https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@400;700&family=Lato:wght@400;700&family=Montserrat:wght@400;700&family=Oswald:wght@400;700&family=Playfair+Display:wght@400;700&family=Roboto:wght@400;700&display=swap';\r\n            link.rel = 'stylesheet';\r\n            document.head.appendChild(link);\r\n        }\r\n    }, []);\r\n\r\n    // --- Global State ---\r\n    const [activePreset, setActivePreset] = useState('visiting-card');\r\n\r\n    // Page Management (Front/Back)\r\n    const [activeSide, setActiveSide] = useState('front'); // 'front' or 'back'\r\n    const [pages, setPages] = useState({ front: [], back: [] });\r\n\r\n    // Current Side State (Synced with pages[activeSide])\r\n    const [elements, setElements] = useState([]);\r\n\r\n    // Customization State\r\n    const [cardShape, setCardShape] = useState('rectangle');\r\n\r\n    const [selectedId, setSelectedId] = useState(null);\r\n    const [history, setHistory] = useState([[]]);\r\n    const [historyIndex, setHistoryIndex] = useState(0);\r\n    const [zoom, setZoom] = useState(1);\r\n    const [showGrid, setShowGrid] = useState(true);\r\n    const [showSafeZone, setShowSafeZone] = useState(true);\r\n    const [bgColor, setBgColor] = useState('#ffffff');\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [isAIModalOpen, setIsAIModalOpen] = useState(false);\r\n    const [aiMode, setAiMode] = useState('layout'); // 'layout' or 'image'\r\n    const [aiPrompt, setAiPrompt] = useState(\"\");\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n    const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n\r\n    // --- Derived State ---\r\n    const basePreset = PRODUCT_PRESETS[activePreset];\r\n    const isCard = activePreset === 'visiting-card';\r\n    const shapeConfig = CARD_SHAPES[cardShape];\r\n\r\n    // Calculate dynamic dimensions based on shape\r\n    const canvasDims = {\r\n        width: (isCard && shapeConfig.square) ? 300 : basePreset.width,\r\n        height: (isCard && shapeConfig.square) ? 300 : basePreset.height,\r\n    };\r\n\r\n    const selectedElement = elements.find(el => el.id === selectedId);\r\n\r\n    // --- Side Switching Logic ---\r\n    const handleSideSwitch = (newSide) => {\r\n        if (newSide === activeSide) return;\r\n\r\n        // Save current state to pages store\r\n        const updatedPages = { ...pages, [activeSide]: elements };\r\n        setPages(updatedPages);\r\n\r\n        // Load new state\r\n        setActiveSide(newSide);\r\n        setElements(updatedPages[newSide]);\r\n        setSelectedId(null);\r\n        setHistory([updatedPages[newSide]]); // Reset history for simplicity on switch\r\n        setHistoryIndex(0);\r\n    };\r\n\r\n    // --- Actions ---\r\n\r\n    const addToHistory = (newElements) => {\r\n        const newHistory = history.slice(0, historyIndex + 1);\r\n        newHistory.push(JSON.parse(JSON.stringify(newElements)));\r\n        setHistory(newHistory);\r\n        setHistoryIndex(newHistory.length - 1);\r\n\r\n        // Sync with pages store immediately to prevent data loss on unintended switches\r\n        setPages(p => ({ ...p, [activeSide]: newElements }));\r\n    };\r\n\r\n    const handleElementUpdate = (id, updates) => {\r\n        const newElements = elements.map(el => el.id === id ? { ...el, ...updates } : el);\r\n        setElements(newElements);\r\n        addToHistory(newElements);\r\n    };\r\n\r\n    const addElement = (type, payload = {}) => {\r\n        const centerX = canvasDims.width / 2;\r\n        const centerY = canvasDims.height / 2;\r\n\r\n        const newElement = {\r\n            id: Date.now(),\r\n            type,\r\n            x: centerX - 50,\r\n            y: centerY - 20,\r\n            rotation: 0,\r\n            zIndex: elements.length + 1,\r\n            ...payload\r\n        };\r\n\r\n        if (type === 'text') {\r\n            newElement.content = 'Double Click to Edit';\r\n            newElement.fontSize = 24;\r\n            newElement.fontFamily = FONT_FAMILIES[0].value;\r\n            newElement.color = '#000000';\r\n            newElement.fontWeight = 'normal';\r\n            newElement.width = 'auto';\r\n        } else if (type === 'image') {\r\n            newElement.width = 150;\r\n            newElement.height = 'auto';\r\n        }\r\n\r\n        const newElements = [...elements, newElement];\r\n        setElements(newElements);\r\n        setSelectedId(newElement.id);\r\n        addToHistory(newElements);\r\n    };\r\n\r\n    const handleImageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                addElement('image', { src: event.target.result });\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleAIGenerate = async () => {\r\n        if (!aiPrompt.trim()) return;\r\n        setIsGenerating(true);\r\n\r\n        try {\r\n            if (aiMode === 'image') {\r\n                // Real AI Image Generation\r\n                const imageUrl = await generateAIImage(aiPrompt);\r\n                addElement('image', { src: imageUrl, width: 300, height: 'auto' });\r\n            } else {\r\n                // Mock Layout Generation (Existing Logic)\r\n                await new Promise(resolve => setTimeout(resolve, 1500));\r\n\r\n                const lowerPrompt = aiPrompt.toLowerCase();\r\n                let newElements = [];\r\n                let bgColor = '#ffffff';\r\n                const centerY = canvasDims.height / 2;\r\n                const centerX = canvasDims.width / 2;\r\n\r\n                // 1. Theme Extraction (Background)\r\n                if (lowerPrompt.includes('dark') || lowerPrompt.includes('black') || lowerPrompt.includes('luxury')) bgColor = '#1a1a1a';\r\n                if (lowerPrompt.includes('blue') || lowerPrompt.includes('tech') || lowerPrompt.includes('corporate')) bgColor = '#eff6ff';\r\n                if (lowerPrompt.includes('green') || lowerPrompt.includes('nature') || lowerPrompt.includes('eco')) bgColor = '#f0fdf4';\r\n                if (lowerPrompt.includes('red') || lowerPrompt.includes('food') || lowerPrompt.includes('sale')) bgColor = '#fef2f2';\r\n                if (lowerPrompt.includes('yellow') || lowerPrompt.includes('bright') || lowerPrompt.includes('kids')) bgColor = '#fefce8';\r\n\r\n                // 2. Content Generation logic\r\n                // Title\r\n                newElements.push({\r\n                    id: Date.now(),\r\n                    type: 'text',\r\n                    x: centerX - 100,\r\n                    y: centerY - 80,\r\n                    content: lowerPrompt.includes('coffee') ? 'The Daily Brew' :\r\n                        lowerPrompt.includes('tech') ? 'Future Systems' :\r\n                            lowerPrompt.includes('sale') ? 'MEGA SALE' : 'Company Name',\r\n                    fontSize: 32,\r\n                    fontFamily: lowerPrompt.includes('tech') ? 'Roboto, sans-serif' :\r\n                        lowerPrompt.includes('coffee') ? '\"Dancing Script\", cursive' :\r\n                            'Montserrat, sans-serif',\r\n                    color: bgColor === '#1a1a1a' ? '#fbbf24' : '#111827',\r\n                    width: 'auto',\r\n                    zIndex: 1,\r\n                    rotation: 0\r\n                });\r\n\r\n                // Subtitle\r\n                newElements.push({\r\n                    id: Date.now() + 1,\r\n                    type: 'text',\r\n                    x: centerX - 80,\r\n                    y: centerY - 30,\r\n                    content: lowerPrompt.includes('coffee') ? 'Freshly Roasted â€¢ Open Daily' :\r\n                        lowerPrompt.includes('tech') ? 'Innovating Tomorrow' :\r\n                            lowerPrompt.includes('sale') ? 'Up to 50% Off' : 'Tagline Goes Here',\r\n                    fontSize: 16,\r\n                    fontFamily: 'Inter, sans-serif',\r\n                    color: bgColor === '#1a1a1a' ? '#9ca3af' : '#4b5563',\r\n                    width: 'auto',\r\n                    zIndex: 2,\r\n                    rotation: 0\r\n                });\r\n\r\n                // Contact Info (Bottom)\r\n                newElements.push({\r\n                    id: Date.now() + 2,\r\n                    type: 'text',\r\n                    x: centerX - 90,\r\n                    y: centerY + 60,\r\n                    content: '+91 98765 43210  |  www.example.com',\r\n                    fontSize: 12,\r\n                    fontFamily: 'Arial, sans-serif',\r\n                    color: bgColor === '#1a1a1a' ? '#d1d5db' : '#6b7280',\r\n                    width: 'auto',\r\n                    zIndex: 3,\r\n                    rotation: 0\r\n                });\r\n\r\n                setBgColor(bgColor);\r\n                setElements(newElements);\r\n                addToHistory(newElements);\r\n            }\r\n        } catch (error) {\r\n            alert(\"AI Generation Failed: \" + error.message);\r\n        } finally {\r\n            setAiPrompt(\"\");\r\n            setIsGenerating(false);\r\n            setIsAIModalOpen(false);\r\n        }\r\n    };\r\n\r\n    // --- Mouse / Drag Handlers ---\r\n\r\n    const handleMouseDown = (e, id) => {\r\n        e.stopPropagation();\r\n        setSelectedId(id);\r\n        setIsDragging(true);\r\n        const element = elements.find(el => el.id === id);\r\n        if (element) {\r\n            setDragStart({\r\n                x: (e.clientX / zoom) - element.x,\r\n                y: (e.clientY / zoom) - element.y\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (isDragging && selectedId) {\r\n            const newX = (e.clientX / zoom) - dragStart.x;\r\n            const newY = (e.clientY / zoom) - dragStart.y;\r\n\r\n            setElements(elements.map(el =>\r\n                el.id === selectedId ? { ...el, x: newX, y: newY } : el\r\n            ));\r\n        }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        if (isDragging) {\r\n            setIsDragging(false);\r\n            addToHistory(elements);\r\n        }\r\n    };\r\n\r\n    // --- Layout Helpers ---\r\n    const GridOverlay = () => (\r\n        <div\r\n            className=\"absolute inset-0 pointer-events-none opacity-20 rounded-inherit\"\r\n            style={{\r\n                backgroundImage: 'linear-gradient(#ccc 1px, transparent 1px), linear-gradient(90deg, #ccc 1px, transparent 1px)',\r\n                backgroundSize: '20px 20px'\r\n            }}\r\n        />\r\n    );\r\n\r\n    const SafeZoneOverlay = ({ width, height, safe, bleed }) => (\r\n        <>\r\n            <div\r\n                className=\"absolute border border-red-400 border-dashed pointer-events-none opacity-50 z-50\"\r\n                style={{ left: -bleed, top: -bleed, right: -bleed, bottom: -bleed }}\r\n            ></div>\r\n            <div\r\n                className=\"absolute border border-green-500 border-dashed pointer-events-none opacity-50 z-50\"\r\n                style={{ left: safe, top: safe, right: safe, bottom: safe }}\r\n            ></div>\r\n        </>\r\n    );\r\n\r\n    return (\r\n        <div className=\"h-screen bg-gray-100 flex flex-col overflow-hidden\" onMouseMove={handleMouseMove} onMouseUp={handleMouseUp}>\r\n\r\n            {/* 1. Header */}\r\n            <div className=\"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between z-20 shadow-sm gap-4\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button onClick={() => navigate(-1)} className=\"p-2 hover:bg-gray-100 rounded-full\">\r\n                        <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\r\n                    </button>\r\n                    <div className=\"flex flex-col\">\r\n                        <h1 className=\"font-bold text-gray-900 leading-tight\">Design Studio</h1>\r\n                        <select\r\n                            value={activePreset}\r\n                            onChange={(e) => { setActivePreset(e.target.value); setCardShape('rectangle'); }}\r\n                            className=\"text-xs text-indigo-600 font-medium bg-transparent border-none p-0 cursor-pointer focus:ring-0\"\r\n                        >\r\n                            {Object.entries(PRODUCT_PRESETS).map(([key, val]) => (\r\n                                <option key={key} value={key}>{val.name}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Zoom Controls */}\r\n                <div className=\"flex items-center gap-2 bg-gray-100 rounded-lg p-1\">\r\n                    <button onClick={() => setZoom(z => Math.max(0.5, z - 0.1))} className=\"p-1.5 hover:bg-white rounded shadow-sm\"><ZoomOut className=\"w-4 h-4\" /></button>\r\n                    <span className=\"text-xs font-mono w-12 text-center\">{Math.round(zoom * 100)}%</span>\r\n                    <button onClick={() => setZoom(z => Math.min(3, z + 0.1))} className=\"p-1.5 hover:bg-white rounded shadow-sm\"><ZoomIn className=\"w-4 h-4\" /></button>\r\n                </div>\r\n\r\n                {/* Finish Action */}\r\n                <div className=\"flex items-center gap-3\">\r\n                    <button\r\n                        onClick={() => setShowGrid(!showGrid)}\r\n                        className={`p-2 rounded ${showGrid ? 'bg-indigo-100 text-indigo-600' : 'hover:bg-gray-100 text-gray-500'}`}\r\n                    >\r\n                        <Grid className=\"w-5 h-5\" />\r\n                    </button>\r\n                    <button\r\n                        className=\"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-indigo-700 shadow-md transition\"\r\n                        onClick={() => {\r\n                            const text = `New Order: ${basePreset.name} (${cardShape}).\\nFront Elements: ${pages.front.length}\\nBack Elements: ${pages.back.length}`;\r\n                            window.open(`https://wa.me/919999999999?text=${encodeURIComponent(text)}`, '_blank');\r\n                        }}\r\n                    >\r\n                        <Save className=\"w-4 h-4\" />\r\n                        Finish & Order\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex-1 flex overflow-hidden\">\r\n\r\n                {/* 2. Sidebar Tools */}\r\n                <div className=\"w-72 bg-white border-r border-gray-200 flex flex-col z-10 overflow-y-auto shadow-[4px_0_24px_rgba(0,0,0,0.02)]\">\r\n                    <div className=\"p-5 space-y-6\">\r\n\r\n                        {/* Insert Tools */}\r\n                        <section>\r\n                            <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3\">Insert</h3>\r\n                            <div className=\"grid grid-cols-2 gap-3\">\r\n                                <button onClick={() => addElement('text')} className=\"tool-btn flex flex-col items-center justify-center p-4 rounded-xl border border-gray-100 bg-gray-50 hover:bg-indigo-50 hover:border-indigo-200 transition group\">\r\n                                    <Type className=\"w-6 h-6 text-gray-600 group-hover:text-indigo-600 mb-2\" />\r\n                                    <span className=\"text-xs font-medium text-gray-700\">Text Box</span>\r\n                                </button>\r\n                                <label className=\"tool-btn flex flex-col items-center justify-center p-4 rounded-xl border border-gray-100 bg-gray-50 hover:bg-indigo-50 hover:border-indigo-200 transition group cursor-pointer\">\r\n                                    <ImageIcon className=\"w-6 h-6 text-gray-600 group-hover:text-indigo-600 mb-2\" />\r\n                                    <span className=\"text-xs font-medium text-gray-700\">Upload Image</span>\r\n                                    <input type=\"file\" className=\"hidden\" onChange={handleImageUpload} />\r\n                                </label>\r\n                            </div>\r\n\r\n                            {/* AI Tools */}\r\n                            <div className=\"space-y-2 mt-3\">\r\n                                <button\r\n                                    onClick={() => { setAiMode('layout'); setIsAIModalOpen(true); }}\r\n                                    className=\"w-full flex items-center justify-center gap-2 p-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all hover:scale-[1.02] group\"\r\n                                >\r\n                                    <Sparkles className=\"w-4 h-4 text-yellow-300 animate-pulse\" />\r\n                                    <span className=\"text-sm font-bold\">Auto-Layout AI</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => { setAiMode('image'); setIsAIModalOpen(true); }}\r\n                                    className=\"w-full flex items-center justify-center gap-2 p-3 bg-white border border-indigo-100 text-indigo-600 rounded-xl hover:bg-indigo-50 transition-all font-medium\"\r\n                                >\r\n                                    <Wand2 className=\"w-4 h-4\" />\r\n                                    <span className=\"text-sm\">Generate AI Image</span>\r\n                                </button>\r\n                            </div>\r\n                        </section>\r\n\r\n                        {/* Shape Selector (Only for Visiting Cards) */}\r\n                        {isCard && !selectedElement && (\r\n                            <section>\r\n                                <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n                                    <Sparkles className=\"w-3 h-3 text-indigo-500\" />\r\n                                    Card Shape\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-3 gap-2\">\r\n                                    {Object.entries(CARD_SHAPES).map(([key, config]) => (\r\n                                        <button\r\n                                            key={key}\r\n                                            onClick={() => setCardShape(key)}\r\n                                            className={`p-2 rounded-lg border text-xs font-medium transition-all ${cardShape === key\r\n                                                ? 'border-indigo-600 bg-indigo-50 text-indigo-700 ring-1 ring-indigo-500'\r\n                                                : 'border-gray-200 text-gray-600 hover:border-indigo-200'\r\n                                                }`}\r\n                                        >\r\n                                            <div className={`w-6 h-4 mx-auto mb-1 bg-current opacity-20 ${config.class} border border-current`}></div>\r\n                                            {config.label}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </section>\r\n                        )}\r\n\r\n                        {/* Properties Panel */}\r\n                        <section className=\"flex-1\">\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">\r\n                                    {selectedElement ? 'Element Properties' : 'Canvas Settings'}\r\n                                </h3>\r\n                                {selectedElement && (\r\n                                    <button onClick={() => {\r\n                                        const newElements = elements.filter(el => el.id !== selectedId);\r\n                                        setElements(newElements);\r\n                                        setSelectedId(null);\r\n                                        addToHistory(newElements);\r\n                                    }} className=\"text-red-500 hover:bg-red-50 p-1.5 rounded transition\">\r\n                                        <Trash2 className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            {selectedElement ? (\r\n                                <div className=\"space-y-4 animate-slide-up\">\r\n                                    {/* Position */}\r\n                                    <div className=\"p-3 bg-gray-50 rounded-lg border border-gray-100\">\r\n                                        <div className=\"grid grid-cols-2 gap-2\">\r\n                                            <div>\r\n                                                <label className=\"text-[10px] text-gray-500\">X Position</label>\r\n                                                <input type=\"number\" value={Math.round(selectedElement.x)} onChange={(e) => handleElementUpdate(selectedElement.id, { x: parseInt(e.target.value) })} className=\"w-full text-xs p-1 rounded border-gray-200\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <label className=\"text-[10px] text-gray-500\">Y Position</label>\r\n                                                <input type=\"number\" value={Math.round(selectedElement.y)} onChange={(e) => handleElementUpdate(selectedElement.id, { y: parseInt(e.target.value) })} className=\"w-full text-xs p-1 rounded border-gray-200\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Text Props */}\r\n                                    {selectedElement.type === 'text' && (\r\n                                        <div className=\"space-y-3\">\r\n                                            <div>\r\n                                                <label className=\"text-xs font-medium text-gray-600\">Content</label>\r\n                                                <textarea\r\n                                                    value={selectedElement.content}\r\n                                                    onChange={(e) => handleElementUpdate(selectedElement.id, { content: e.target.value })}\r\n                                                    className=\"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none\"\r\n                                                    rows={2}\r\n                                                />\r\n                                            </div>\r\n                                            <div>\r\n                                                <label className=\"text-xs font-medium text-gray-600 block mb-1\">Typography</label>\r\n\r\n                                                {/* Font Family Selector */}\r\n                                                <select\r\n                                                    value={selectedElement.fontFamily}\r\n                                                    onChange={(e) => handleElementUpdate(selectedElement.id, { fontFamily: e.target.value })}\r\n                                                    className=\"w-full text-xs p-2 mb-2 bg-white border border-gray-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-500\"\r\n                                                >\r\n                                                    {FONT_FAMILIES.map(font => (\r\n                                                        <option key={font.name} value={font.value} style={{ fontFamily: font.value }}>\r\n                                                            {font.name}\r\n                                                        </option>\r\n                                                    ))}\r\n                                                </select>\r\n\r\n                                                <div className=\"flex gap-2\">\r\n                                                    <input type=\"number\" value={selectedElement.fontSize} onChange={(e) => handleElementUpdate(selectedElement.id, { fontSize: parseInt(e.target.value) })} className=\"w-16 text-sm p-2 bg-white border border-gray-200 rounded-lg\" />\r\n                                                    <div className=\"flex-1 flex items-center px-2 bg-white border border-gray-200 rounded-lg\">\r\n                                                        <input type=\"color\" value={selectedElement.color} onChange={(e) => handleElementUpdate(selectedElement.id, { color: e.target.value })} className=\"w-6 h-6 border-none p-0 cursor-pointer\" />\r\n                                                        <span className=\"text-xs text-gray-500 ml-2 font-mono uppercase\">{selectedElement.color}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Image Props */}\r\n                                    {selectedElement.type === 'image' && (\r\n                                        <div>\r\n                                            <label className=\"text-xs font-medium text-gray-600\">Width (px)</label>\r\n                                            <input\r\n                                                type=\"range\" min=\"50\" max=\"600\"\r\n                                                value={parseInt(selectedElement.width)}\r\n                                                onChange={(e) => handleElementUpdate(selectedElement.id, { width: parseInt(e.target.value) })}\r\n                                                className=\"w-full mt-2 accent-indigo-600\"\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"space-y-4\">\r\n                                    {/* Background Color */}\r\n                                    <div>\r\n                                        <label className=\"text-xs font-medium text-gray-600 mb-2 block\">Background Color</label>\r\n                                        <div className=\"flex flex-wrap gap-2\">\r\n                                            {['#ffffff', '#000000', '#f3f4f6', '#fee2e2', '#e0e7ff', '#dcfce7'].map(color => (\r\n                                                <button\r\n                                                    key={color}\r\n                                                    onClick={() => setBgColor(color)}\r\n                                                    className={`w-8 h-8 rounded-full border shadow-sm transition transform hover:scale-110 ${bgColor === color ? 'ring-2 ring-indigo-500 ring-offset-2' : ''}`}\r\n                                                    style={{ backgroundColor: color }}\r\n                                                />\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Guidelines */}\r\n                                    <div className=\"p-4 bg-yellow-50 rounded-lg border border-yellow-100\">\r\n                                        <div className=\"flex gap-2 items-start\">\r\n                                            <AlertCircle className=\"w-4 h-4 text-yellow-600 mt-0.5\" />\r\n                                            <div>\r\n                                                <h4 className=\"text-xs font-bold text-yellow-800 mb-1\">Safety Guide</h4>\r\n                                                <p className=\"text-[10px] text-yellow-700\">\r\n                                                    Red line = Cut line (Bleed). Green line = Safe zone.\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"mt-3 space-y-2\">\r\n                                            <label className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n                                                <input type=\"checkbox\" checked={showSafeZone} onChange={(e) => setShowSafeZone(e.target.checked)} className=\"rounded text-indigo-600\" />\r\n                                                Show Safe Zones\r\n                                            </label>\r\n                                            <label className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n                                                <input type=\"checkbox\" checked={showGrid} onChange={(e) => setShowGrid(e.target.checked)} className=\"rounded text-indigo-600\" />\r\n                                                Show Grid Alignment\r\n                                            </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </section>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 3. Infinite Workspace (Canvas) */}\r\n                <div className=\"flex-1 bg-gray-200 overflow-hidden relative flex flex-col items-center justify-center\">\r\n\r\n                    {/* Side Toggles (Front/Back) */}\r\n                    {isCard && (\r\n                        <div className=\"absolute top-6 z-10 bg-white p-1 rounded-full shadow-lg flex gap-1 border border-gray-200\">\r\n                            <button\r\n                                onClick={() => handleSideSwitch('front')}\r\n                                className={`px-4 py-1.5 rounded-full text-sm font-medium transition-all ${activeSide === 'front' ? 'bg-indigo-600 text-white shadow' : 'text-gray-600 hover:bg-gray-100'}`}\r\n                            >\r\n                                Front Side\r\n                            </button>\r\n                            <button\r\n                                onClick={() => handleSideSwitch('back')}\r\n                                className={`px-4 py-1.5 rounded-full text-sm font-medium transition-all ${activeSide === 'back' ? 'bg-indigo-600 text-white shadow' : 'text-gray-600 hover:bg-gray-100'}`}\r\n                            >\r\n                                Back Side\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Active Artboard */}\r\n                    <div className=\"relative cursor-grab active:cursor-grabbing p-12 overflow-visible\">\r\n                        <div\r\n                            className={`relative bg-white shadow-2xl transition-all duration-300 ease-out origin-center overflow-hidden ${isCard ? CARD_SHAPES[cardShape].class : ''}`}\r\n                            onClick={() => setSelectedId(null)}\r\n                            style={{\r\n                                width: canvasDims.width,\r\n                                height: canvasDims.height,\r\n                                backgroundColor: bgColor,\r\n                                transform: `scale(${zoom})`,\r\n                            }}\r\n                        >\r\n                            {showGrid && <GridOverlay />}\r\n                            {showSafeZone && <SafeZoneOverlay {...basePreset} />}\r\n\r\n                            {/* Render Elements */}\r\n                            {elements.map(el => (\r\n                                <div\r\n                                    key={el.id}\r\n                                    onMouseDown={(e) => handleMouseDown(e, el.id)}\r\n                                    // Handle Double Click for Text Editing\r\n                                    onDoubleClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        if (el.type === 'text') {\r\n                                            // Simple prompt for quick editing, or we could focus sidebar\r\n                                            const newText = window.prompt(\"Edit Text:\", el.content);\r\n                                            if (newText !== null) handleElementUpdate(el.id, { content: newText });\r\n                                        }\r\n                                    }}\r\n                                    className={`absolute cursor-move select-none group ${selectedId === el.id ? 'z-50' : ''}`}\r\n                                    style={{\r\n                                        left: el.x,\r\n                                        top: el.y,\r\n                                        width: el.type === 'image' ? el.width : 'auto',\r\n                                        zIndex: el.zIndex,\r\n                                    }}\r\n                                >\r\n                                    {/* Selecting Element Toolbar */}\r\n                                    {selectedId === el.id && (\r\n                                        <div\r\n                                            className=\"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-white shadow-lg border border-gray-200 rounded-lg flex items-center p-1 gap-1 z-[60] whitespace-nowrap\"\r\n                                            onMouseDown={(e) => e.stopPropagation()} // Prevent drag when clicking toolbar\r\n                                        >\r\n                                            <button\r\n                                                className=\"p-1.5 hover:bg-gray-100 rounded text-gray-600 hover:text-indigo-600\"\r\n                                                title=\"Edit Text\"\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    if (el.type === 'text') {\r\n                                                        const newText = window.prompt(\"Edit Text:\", el.content);\r\n                                                        if (newText !== null) handleElementUpdate(el.id, { content: newText });\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                {el.type === 'text' ? <Type size={14} /> : <ImageIcon size={14} />}\r\n                                            </button>\r\n                                            <div className=\"w-px h-4 bg-gray-200 mx-0.5\"></div>\r\n                                            <button\r\n                                                className=\"p-1.5 hover:bg-gray-100 rounded text-gray-600\"\r\n                                                title=\"Bring to Front\"\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    handleElementUpdate(el.id, { zIndex: Math.max(...elements.map(e => e.zIndex)) + 1 });\r\n                                                }}\r\n                                            >\r\n                                                <Layers size={14} />\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"p-1.5 hover:bg-gray-100 rounded text-gray-600\"\r\n                                                title=\"Duplicate\"\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    addElement(el.type, { ...el, id: undefined, x: el.x + 20, y: el.y + 20, zIndex: elements.length + 1 });\r\n                                                }}\r\n                                            >\r\n                                                <Copy size={14} />\r\n                                            </button>\r\n                                            <div className=\"w-px h-4 bg-gray-200 mx-0.5\"></div>\r\n                                            <button\r\n                                                className=\"p-1.5 hover:bg-red-50 rounded text-red-500 hover:text-red-600\"\r\n                                                title=\"Delete Element\"\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    const newElements = elements.filter(item => item.id !== el.id);\r\n                                                    setElements(newElements);\r\n                                                    setSelectedId(null);\r\n                                                    addToHistory(newElements);\r\n                                                }}\r\n                                            >\r\n                                                <Trash2 size={14} />\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {el.type === 'text' ? (\r\n                                        <div\r\n                                            className={`px-2 py-1 leading-none whitespace-nowrap border-2 ${selectedId === el.id ? 'border-indigo-500' : 'border-transparent hover:border-indigo-200 dashed'}`}\r\n                                            style={{\r\n                                                color: el.color,\r\n                                                fontSize: el.fontSize,\r\n                                                fontFamily: el.fontFamily\r\n                                            }}\r\n                                        >\r\n                                            {el.content}\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className={`relative ${selectedId === el.id ? 'ring-2 ring-indigo-500' : ''}`}>\r\n                                            <img src={el.src} alt=\"\" className=\"w-full h-auto block pointer-events-none\" />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Zoom & Dimensions Badge */}\r\n                        <div className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-gray-400 text-xs font-mono\">\r\n                            {canvasDims.width}px x {canvasDims.height}px\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* AI Prompt Modal */}\r\n            {\r\n                isAIModalOpen && (\r\n                    <div className=\"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\">\r\n                        <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in-up\">\r\n                            <div className={`p-6 bg-gradient-to-r ${aiMode === 'image' ? 'from-pink-500 to-rose-500' : 'from-purple-600 to-indigo-600'}`}>\r\n                                <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                                    {aiMode === 'image' ? <Wand2 className=\"w-5 h-5 text-white\" /> : <Sparkles className=\"w-5 h-5 text-yellow-300\" />}\r\n                                    {aiMode === 'image' ? 'AI Image Generator' : 'AI Layout Designer'}\r\n                                </h2>\r\n                                <p className=\"text-white/90 text-sm mt-1\">\r\n                                    {aiMode === 'image'\r\n                                        ? \"Describe an image, and AI will generate it for you.\"\r\n                                        : \"Describe your business text, and we'll create a layout.\"}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"p-6 space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                        {aiMode === 'image' ? \"Image Description\" : \"Business Description\"}\r\n                                    </label>\r\n                                    <textarea\r\n                                        value={aiPrompt}\r\n                                        onChange={(e) => setAiPrompt(e.target.value)}\r\n                                        placeholder={aiMode === 'image' ? \"Astronaut riding a horse in space...\" : \"A minimalist business card for a coffee shop...\"}\r\n                                        className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none bg-gray-50 min-h-[100px]\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-3 pt-2\">\r\n                                    <button\r\n                                        onClick={() => setIsAIModalOpen(false)}\r\n                                        className=\"flex-1 py-2.5 bg-gray-100 text-gray-700 font-medium rounded-xl hover:bg-gray-200 transition\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={handleAIGenerate}\r\n                                        disabled={!aiPrompt.trim() || isGenerating}\r\n                                        className={`flex-[2] py-2.5 text-white font-bold rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition ${aiMode === 'image' ? 'bg-rose-600 hover:bg-rose-700 shadow-rose-200' : 'bg-purple-600 hover:bg-purple-700 shadow-purple-200'}`}\r\n                                    >\r\n                                        {isGenerating ? (\r\n                                            <>\r\n                                                <span className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></span>\r\n                                                Generating...\r\n                                            </>\r\n                                        ) : (\r\n                                            <>\r\n                                                {aiMode === 'image' ? <Wand2 className=\"w-4 h-4\" /> : <Sparkles className=\"w-4 h-4\" />}\r\n                                                Generate\r\n                                            </>\r\n                                        )}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default DesignEditor;\r\n"],"names":["HF_TOKEN","process","REACT_APP_HF_TOKEN","client","HfInference","PRODUCT_PRESETS","name","width","height","bleed","safe","CARD_SHAPES","label","class","square","FONT_FAMILIES","value","type","DesignEditor","_location$state","navigate","useNavigate","useLocation","state","serviceName","useRef","useEffect","linkId","document","getElementById","link","createElement","id","href","rel","head","appendChild","activePreset","setActivePreset","useState","activeSide","setActiveSide","pages","setPages","front","back","elements","setElements","cardShape","setCardShape","selectedId","setSelectedId","history","setHistory","historyIndex","setHistoryIndex","zoom","setZoom","showGrid","setShowGrid","showSafeZone","setShowSafeZone","bgColor","setBgColor","isDragging","setIsDragging","isAIModalOpen","setIsAIModalOpen","aiMode","setAiMode","aiPrompt","setAiPrompt","isGenerating","setIsGenerating","dragStart","setDragStart","x","y","basePreset","isCard","shapeConfig","canvasDims","selectedElement","find","el","handleSideSwitch","newSide","updatedPages","_objectSpread","addToHistory","newElements","newHistory","slice","push","JSON","parse","stringify","length","p","handleElementUpdate","updates","map","addElement","payload","arguments","undefined","centerX","centerY","newElement","Date","now","rotation","zIndex","content","fontSize","fontFamily","color","fontWeight","GridOverlay","_jsx","className","style","backgroundImage","backgroundSize","SafeZoneOverlay","_ref","_jsxs","_Fragment","children","left","top","right","bottom","onMouseMove","e","newX","clientX","newY","clientY","onMouseUp","handleMouseUp","onClick","ArrowLeft","onChange","target","Object","entries","_ref2","key","val","z","Math","max","ZoomOut","round","min","ZoomIn","concat","Grid","text","window","open","encodeURIComponent","Save","Type","ImageIcon","file","files","reader","FileReader","onload","event","src","result","readAsDataURL","Sparkles","Wand2","_ref3","config","filter","Trash2","parseInt","rows","font","backgroundColor","AlertCircle","checked","transform","onMouseDown","handleMouseDown","stopPropagation","element","onDoubleClick","newText","prompt","title","size","Layers","Copy","item","alt","placeholder","async","trim","imageUrl","Error","response","textToImage","model","inputs","parameters","Promise","resolve","reject","onloadend","onerror","error","console","generateAIImage","setTimeout","lowerPrompt","toLowerCase","includes","alert","message","disabled"],"ignoreList":[],"sourceRoot":""}